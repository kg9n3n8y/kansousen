# かるた試合後分析ツール

かるたの試合後（感想戦）に、取った札・取られた札を陣形と決まり字付きで整理するためのシンプルな Web アプリです。マルチステップの入力ダイアログで記録を残し、盤面イメージとして視覚化・画像出力できるように設計されています。PWA（Progressive Web App）として配信でき、オフラインでも利用可能です。

## 主な機能
- 決まり字リストからの検索・選択と、陣の区画/何字決まり/取得者を順番に入力できるウィザード形式のダイアログ
- 入力済みの札を配置図上でレイアウトし、自陣/相手陣それぞれの左右列に対応した表示
- 取札一覧ビューからの削除操作と、盤面表示のリアルタイム更新
- 盤面レイアウトをキャンバス描画し、PNG 形式でダウンロード
- Service Worker によるアセットキャッシュと PWA マニフェストでのホーム画面インストール対応

## 動作環境
- モダンブラウザ（Chrome / Edge / Safari / Firefox 最新版相当）
- HTTPS もしくは `localhost` での提供が必要です（Service Worker を有効化するため）

## ローカルでの確認方法
1. リポジトリを取得し、プロジェクトルートに移動します。
2. 任意の静的ファイルサーバーで `index.html` を配信します。例：
   ```bash
   python3 -m http.server 8000
   ```
3. ブラウザで `http://localhost:8000/` を開き、アプリを操作します。

> 💡 直接ファイルを開く（`file://` スキーム）場合、Service Worker が有効にならないため推奨しません。

## 使い方
1. 「取札を追加」ボタンを押すとダイアログが開きます。
2. 決まり字を検索・選択し、取った/取られた場所を盤面から選択します。
3. 何字決まりか（1〜6字）、誰が取ったか（自分/相手）を入力すると要約が表示されます。
4. 「追加」ボタンで盤面と一覧に反映され、不要な項目は一覧の削除ボタンから取り除けます。
5. 盤面のレイアウトを画像として保存したい場合は「画像としてダウンロード」ボタンを押してください。

## データの扱い
- 記録した内容はブラウザメモリ上で保持されます。ページを再読み込みするとリセットされるため、必要に応じて画像ダウンロード機能をご利用ください。
- サーバーへの送信やバックエンド連携は行っていません。

## PWA とオフライン対応
- 初回アクセス時に Service Worker がインストールされ、`index.html` やスタイル/スクリプト/アイコンをキャッシュします。
- 以降はオフラインでもアプリを開いて操作できます（ただしセッション内のデータのみ保持）。
- 対応ブラウザでは「ホーム画面に追加」からスタンドアロンアプリとして利用可能です。

## プロジェクト構成
- `index.html` … アプリ本体のマークアップ。ウィザードダイアログや盤面レイアウトを定義。
- `app.js` … 盤面の状態管理、UI 更新、画像ダウンロード処理、Service Worker 登録などのロジック。
- `styles.css` … 全体のスタイリング、盤面グリッドやダイアログの見た目を定義。
- `service-worker.js` … オフラインキャッシュ用の Service Worker 実装。
- `manifest.webmanifest` … PWA メタデータ。
- `icons/` … PWA 用アイコン群。

## 開発メモ
- 本アプリは純粋な HTML/CSS/JavaScript で構成されているため、ビルドステップは不要です。
- コードを変更した場合はブラウザをリロードして確認してください。Service Worker のキャッシュが残る場合は、開発者ツールでキャッシュ削除や更新を行うと確実です。

## ライセンス
- ライセンスは未設定です。必要に応じて `LICENSE` ファイルを追加してください。
